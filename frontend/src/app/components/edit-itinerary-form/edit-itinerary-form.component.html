<div class="itinerary-form-container">
  <mat-card class="itinerary-form-card" appearance="outlined">
    <mat-icon class="exit-btn" (click)="onExitForm()">close</mat-icon>
    <form
      class="itinerary-form"
      id="ItineraryPreviewForm"
      (submit)="updateItinerary()"
      [formGroup]="itineraryForm"
    >
      <div class="form-header">
        <div class="itinerary-form-title">Itinerary Details</div>
        <div class="itinerary-form-subtitle">
          Enter the details for your updated itinerary
        </div>
      </div>
      <mat-form-field>
        <mat-label>Trip Name</mat-label>
        <input
          formControlName="title"
          placeholder="Trip Name"
          matInput
          maxlength="75"
        />
        <mat-hint align="end"
          >{{ itineraryForm?.get("title")?.value?.length || 0 }}/75</mat-hint
        >
      </mat-form-field>
      <div class="itinerary-form-subtitle">Current location</div>
      <div *ngIf="initalItineraryData" class="itinerary-form-content">
        {{
          initalItineraryData?.location?.address
            ? initalItineraryData?.location?.address
            : ""
        }}
      </div>
      <app-place-autocomplete
        formControlName="location"
        (placeChanged)="handlePlaceChanged($event)"
      ></app-place-autocomplete>
      <app-google-map [location]="newLocation"></app-google-map>
      <mat-form-field>
        <mat-label>Enter a date range</mat-label>

        <mat-date-range-input [rangePicker]="picker">
          <input
            matStartDate
            formControlName="startDate"
            placeholder="Start date"
          />
          <input matEndDate formControlName="endDate" placeholder="End date" />
        </mat-date-range-input>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>

        <mat-date-range-picker #picker></mat-date-range-picker>

        <mat-error
          *ngIf="range.controls.startDate.hasError('matStartDateInvalid')"
          >Invalid startDate date</mat-error
        >
        <mat-error *ngIf="range.controls.endDate.hasError('matEndDateInvalid')"
          >Invalid endDate date</mat-error
        >
        <mat-hint align="end">MM/DD/YY</mat-hint>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Description</mat-label>
        <textarea
          formControlName="description"
          matInput
          maxlength="250"
        ></textarea>
        <mat-hint align="end"
          >{{
            itineraryForm?.get("description")?.value?.length || 0
          }}/250</mat-hint
        >
      </mat-form-field>

      <button type="submit" mat-raised-button class="itinerary-btn">
        Update Itinerary
      </button>
    </form>
  </mat-card>
</div>
